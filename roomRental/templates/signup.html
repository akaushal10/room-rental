{% extends 'base.html' %} {% block container %}
<div class="row p-5">
  <form
    id="signup-form"
    class="row col-11 col-md-6 col-lg-4 mx-auto border rounded p-3 shadow"
    novalidate
  >
    {% csrf_token %}
    <div class="col-12 my-2">
      <label for="signup-name" class="form-label">Username</label>
      <input type="text" class="form-control" id="signup-name" name="signup_name" required />
      <div class="invalid-feedback">Please provide a valid name.</div>
      <div class="valid-feedback">Looks good.</div>
    </div>
    <div class="col-12 my-2">
      <label for="signup-email" class="form-label">Email</label>
      <input type="email" class="form-control" id="signup-email" name="signup-email"  required />
      <div class="invalid-feedback">Please provide a valid email.</div>
      <div class="valid-feedback">Looks good.</div>
    </div>
    <div class="col-12 my-2">
        <label class="form-label">Gender</label>
        <select class="form-select"v id="signup-gender" required>
          <option value="">Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        <div class="invalid-feedback">Please select Gender</div>
    </div>
    <div class="col-12 my-2">
      <label for="signup-password" class="form-label">Password</label>
      <input
        type="password"
        class="form-control"
        id="signup-password"
        required
      />
      <div class="invalid-feedback">Please provide a valid password.</div>
      <div class="valid-feedback">Looks good.</div>
    </div>
    <div class="col-12 my-2">
      <label for="signup-mobile" class="form-label">Mobile</label>
      <input type="text" class="form-control" id="signup-mobile" required />
      <div class="invalid-feedback">Please provide a valid mobile.</div>
      <div class="valid-feedback">Looks good.</div>
    </div>

    <!-- <div class="col-12 my-2">
            <label for="signup-confirm-password" class="form-label">Password</label>
            <input type="password" class="form-control" id="signup-confirm-password" required />
            <div class="invalid-feedback">
              Please provide a valid password.
            </div>
            <div class="valid-feedback">
                Looks good.
            </div>
        </div> -->
    <div class="col-12 my-2 text-center">
      <button class="mx-auto btn btn-success">Sign up</button>
    </div>
  </form>
</div>
<script>
  const authUser = (event) => {
    event.preventDefault();
    var formData = new FormData();
    formData.append("name", $("#signup-name").val());
    formData.append("email", $("#signup-email").val());
    formData.append("password", $("#signup-password").val());
    formData.append("mobile", $("#signup-mobile").val());
        formData.append(
      "csrfmiddlewaretoken",
      $("input[name=csrfmiddlewaretoken]").val()
    );

    fetch("{{curl}}signup/", {
      method: "POST",
      body: formData,
      credentials: "same-origin",
    })
      .then((response) => response.json())
      .then((json) => console.log(json))
      .catch((err) => {
        console.log(err);
      });
  };
  $("#signup-form").submit(authUser);
</script>
{% endblock %}
